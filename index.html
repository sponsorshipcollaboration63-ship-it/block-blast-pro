<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Block Blast Pro</title>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-app-pub-2761605268905056~7782544870" crossorigin="anonymous"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, sans-serif; 
            touch-action: none; 
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        #app { width: 100%; height: 100vh; display: flex; flex-direction: column; }
        .screen { flex: 1; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .screen.active { display: flex; }
        button { 
            padding: 15px 30px; 
            font-size: 18px; 
            font-weight: bold; 
            border: none; 
            border-radius: 15px; 
            cursor: pointer;
            margin: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        button:active { transform: scale(0.95); }
        .grid { 
            display: grid; 
            grid-template-columns: repeat(8, 1fr); 
            gap: 5px; 
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 15px;
            margin: 20px 0;
            max-width: 400px;
        }
        .cell { 
            aspect-ratio: 1; 
            background: rgba(255,255,255,0.2); 
            border-radius: 5px;
            transition: all 0.2s;
        }
        .blocks { display: flex; gap: 10px; margin: 20px 0; }
        .block { 
            background: rgba(255,255,255,0.2); 
            padding: 15px; 
            border-radius: 10px; 
            cursor: pointer;
            transition: transform 0.2s;
        }
        .block:active { transform: scale(1.1); }
        .block-cell { 
            width: 20px; 
            height: 20px; 
            border-radius: 3px; 
            margin: 2px;
        }
        .stats { 
            display: flex; 
            gap: 15px; 
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        .stat { 
            background: rgba(255,255,255,0.2); 
            padding: 10px 20px; 
            border-radius: 10px;
            text-align: center;
        }
        .stat-value { font-size: 24px; font-weight: bold; }
        .stat-label { font-size: 12px; opacity: 0.8; }
        input { 
            padding: 12px; 
            font-size: 16px; 
            border: 2px solid white;
            border-radius: 10px;
            margin: 10px;
            width: 250px;
        }
        h1 { font-size: 40px; margin: 20px 0; text-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        h2 { font-size: 28px; margin: 15px 0; }
        .progress { 
            width: 100%; 
            max-width: 400px;
            height: 20px; 
            background: rgba(255,255,255,0.2); 
            border-radius: 10px; 
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-bar { 
            height: 100%; 
            background: linear-gradient(90deg, #4ade80, #22c55e); 
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Home Screen -->
        <div class="screen active" id="home">
            <h1>üéÆ Block Blast Pro</h1>
            <h2>üí∞ Earn Real Money!</h2>
            <div class="stat">
                <div class="stat-label">Earn Per Level</div>
                <div class="stat-value">‚Çπ0.25</div>
            </div>
            <button onclick="showScreen('game')">üéÆ Start Playing</button>
            <button onclick="showScreen('profile')">üë§ My Profile</button>
            <button onclick="showScreen('wallet')">üí∞ Wallet (‚Çπ<span id="home-earnings">0.00</span>)</button>
        </div>

        <!-- Game Screen -->
        <div class="screen" id="game">
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="score">0</div>
                    <div class="stat-label">Score</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="level">1</div>
                    <div class="stat-label">Level</div>
                </div>
                <div class="stat">
                    <div class="stat-value">‚Çπ<span id="earnings">0.00</span></div>
                    <div class="stat-label">Earned</div>
                </div>
            </div>
            
            <div class="progress">
                <div class="progress-bar" id="progress" style="width: 0%"></div>
            </div>
            
            <div class="grid" id="grid"></div>
            
            <div class="blocks" id="blocks"></div>
            
            <div style="display: flex; gap: 10px;">
                <button onclick="showScreen('home')">üè† Home</button>
                <button onclick="resetGame()">üîÑ Reset</button>
                <button onclick="showScreen('wallet')">üí∞ Wallet</button>
            </div>
        </div>

        <!-- Profile Screen -->
        <div class="screen" id="profile">
            <h2>üë§ My Profile</h2>
            <input type="text" id="name-input" placeholder="Your Name" />
            <input type="text" id="upi-input" placeholder="UPI ID (name@paytm)" />
            <button onclick="saveProfile()">üíæ Save Profile</button>
            <button onclick="showScreen('home')">üè† Home</button>
        </div>

        <!-- Wallet Screen -->
        <div class="screen" id="wallet">
            <h2>üí∞ My Wallet</h2>
            <div class="stat" style="font-size: 48px; margin: 20px 0;">
                ‚Çπ<span id="wallet-earnings">0.00</span>
            </div>
            <button onclick="withdraw()" id="withdraw-btn">üí∏ Withdraw</button>
            <button onclick="showScreen('home')">üè† Home</button>
            <div id="history" style="margin-top: 20px; text-align: center;"></div>
        </div>
    </div>

    <script>
        // Game State
        let grid = Array(64).fill(null);
        let score = 0;
        let level = 1;
        let progress = 0;
        let earnings = parseFloat(localStorage.getItem('earnings') || '0');
        let blocks = [];
        let colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A'];
        
        // Init
        document.getElementById('name-input').value = localStorage.getItem('userName') || '';
        document.getElementById('upi-input').value = localStorage.getItem('userUPI') || '';
        updateUI();
        
        function showScreen(screen) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screen).classList.add('active');
            if (screen === 'game' && blocks.length === 0) initGame();
        }
        
        function initGame() {
            grid = Array(64).fill(null);
            blocks = generateBlocks();
            renderGame();
        }
        
        function generateBlocks() {
            const shapes = [
                [[1]], [[1,1]], [[1],[1]], [[1,1,1]],
                [[1,1],[1,1]], [[1,1,0],[0,1,1]]
            ];
            return Array(3).fill(0).map(() => ({
                shape: shapes[Math.floor(Math.random() * shapes.length)],
                color: colors[Math.floor(Math.random() * colors.length)]
            }));
        }
        
        function renderGame() {
            // Render grid
            const gridEl = document.getElementById('grid');
            gridEl.innerHTML = '';
            grid.forEach((cell, i) => {
                const div = document.createElement('div');
                div.className = 'cell';
                if (cell) div.style.background = cell;
                div.onclick = () => placeBlock(i);
                gridEl.appendChild(div);
            });
            
            // Render blocks
            const blocksEl = document.getElementById('blocks');
            blocksEl.innerHTML = '';
            blocks.forEach((block, idx) => {
                if (!block) return;
                const div = document.createElement('div');
                div.className = 'block';
                div.onclick = () => selectBlock(idx);
                block.shape.forEach(row => {
                    const rowDiv = document.createElement('div');
                    rowDiv.style.display = 'flex';
                    row.forEach(cell => {
                        const cellDiv = document.createElement('div');
                        cellDiv.className = 'block-cell';
                        cellDiv.style.background = cell ? block.color : 'transparent';
                        rowDiv.appendChild(cellDiv);
                    });
                    div.appendChild(rowDiv);
                });
                blocksEl.appendChild(div);
            });
        }
        
        let selectedBlockIdx = null;
        function selectBlock(idx) {
            selectedBlockIdx = idx;
        }
        
        function placeBlock(gridIdx) {
            if (selectedBlockIdx === null) return;
            const block = blocks[selectedBlockIdx];
            if (!block) return;
            
            const row = Math.floor(gridIdx / 8);
            const col = gridIdx % 8;
            
            // Check if can place
            for (let r = 0; r < block.shape.length; r++) {
                for (let c = 0; c < block.shape[r].length; c++) {
                    if (block.shape[r][c]) {
                        const newRow = row + r;
                        const newCol = col + c;
                        if (newRow >= 8 || newCol >= 8 || grid[newRow * 8 + newCol]) return;
                    }
                }
            }
            
            // Place block
            for (let r = 0; r < block.shape.length; r++) {
                for (let c = 0; c < block.shape[r].length; c++) {
                    if (block.shape[r][c]) {
                        grid[(row + r) * 8 + (col + c)] = block.color;
                    }
                }
            }
            
            blocks[selectedBlockIdx] = null;
            selectedBlockIdx = null;
            score += 10;
            progress += 5;
            
            // Clear lines
            clearLines();
            
            // Check level up
            if (progress >= 100) {
                level++;
                progress = 0;
                earnings += 0.25;
                localStorage.setItem('earnings', earnings);
                alert('üéâ Level ' + (level-1) + ' Complete! +‚Çπ0.25');
            }
            
            // Generate new blocks if all used
            if (blocks.every(b => !b)) {
                blocks = generateBlocks();
            }
            
            updateUI();
            renderGame();
        }
        
        function clearLines() {
            // Clear rows
            for (let r = 0; r < 8; r++) {
                let full = true;
                for (let c = 0; c < 8; c++) {
                    if (!grid[r * 8 + c]) full = false;
                }
                if (full) {
                    for (let c = 0; c < 8; c++) grid[r * 8 + c] = null;
                    score += 100;
                    progress += 10;
                }
            }
            
            // Clear columns
            for (let c = 0; c < 8; c++) {
                let full = true;
                for (let r = 0; r < 8; r++) {
                    if (!grid[r * 8 + c]) full = false;
                }
                if (full) {
                    for (let r = 0; r < 8; r++) grid[r * 8 + c] = null;
                    score += 100;
                    progress += 10;
                }
            }
        }
        
        function resetGame() {
            score = 0;
            progress = 0;
            initGame();
            updateUI();
        }
        
        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = level;
            document.getElementById('earnings').textContent = earnings.toFixed(2);
            document.getElementById('home-earnings').textContent = earnings.toFixed(2);
            document.getElementById('wallet-earnings').textContent = earnings.toFixed(2);
            document.getElementById('progress').style.width = progress + '%';
        }
        
        function saveProfile() {
            localStorage.setItem('userName', document.getElementById('name-input').value);
            localStorage.setItem('userUPI', document.getElementById('upi-input').value);
            alert('Profile saved!');
        }
        
        function withdraw() {
            const upi = localStorage.getItem('userUPI');
            if (!upi) {
                alert('Please add UPI ID in profile!');
                return;
            }
            if (earnings < 10) {
                alert('Minimum withdrawal: ‚Çπ10');
                return;
            }
            
            alert('‚Çπ' + earnings.toFixed(2) + ' withdrawal requested! Will be credited within 24-48 hours.');
            earnings = 0;
            localStorage.setItem('earnings', '0');
            updateUI();
        }
    </script>
</body>
</html>
